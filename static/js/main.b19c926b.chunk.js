(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{10:function(e,t,o){e.exports={buttonsContainer:"SoundButtons_buttonsContainer__3Upw6",button:"SoundButtons_button__RkEGW",buttonText:"SoundButtons_buttonText__2WbDG"}},11:function(e,t,o){e.exports={footer:"Footer_footer__2J-EK",github:"Footer_github__KcdBQ",rsschool:"Footer_rsschool__3nIXd"}},15:function(e,t,o){e.exports={header:"Header_header__uw8W5",gameName:"Header_gameName__1Qaiw"}},3:function(e,t,o){e.exports={loseContainer:"LosePopup_loseContainer__jEVKV",youLose:"LosePopup_youLose__IuvSQ",scoreContainer:"LosePopup_scoreContainer__1AV5E",score:"LosePopup_score__zluBD",button:"LosePopup_button__3gmCl",buttonText:"LosePopup_buttonText__UX1sG"}},35:function(e,t,o){},4:function(e,t,o){e.exports={gameContainer:"Game_gameContainer__3k622",grid:"Game_grid__2eYF9",scoreData:"Game_scoreData__2uLZi",fieldItem:"Game_fieldItem__2_U0x",isFood:"Game_isFood__23aTM",isHead:"Game_isHead__2eY8j",isTail:"Game_isTail__3HOiq"}},41:function(e,t,o){"use strict";o.r(t);var a=o(1),s=o.n(a),n=o(8),r=o.n(n),i=o(5),c=(o(35),o(15)),d=o.n(c),u=o(0),l=function(e){return Object(u.jsx)("header",{className:d.a.header,children:Object(u.jsx)("span",{className:d.a.gameName,children:"Snake Game"})})},p=o(20),h=o(21),j=o(9),b=o(24),m=o(23),g=o(4),O=o.n(g),_=o(22),f=o.n(_),w=o(3),v=o.n(w),x=function(e){return Object(u.jsxs)("div",{className:v.a.loseContainer,children:[Object(u.jsx)("span",{className:v.a.youLose,children:"You lose"}),Object(u.jsxs)("span",{className:v.a.scoreContainer,children:["Your score: ",Object(u.jsx)("span",{className:v.a.score,children:e.score})]}),Object(u.jsxs)("span",{className:v.a.scoreContainer,children:["Your time: ",Object(u.jsxs)("span",{className:v.a.score,children:[e.time," sec"]})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:v.a.button,type:"button",onClick:function(e){e.preventDefault(),window.location.reload()},children:Object(u.jsx)("span",{className:v.a.buttonText,children:"new game"})})})]})},k=o(7),P=o.n(k),y=function(e){return Object(u.jsxs)("div",{className:P.a.progressContainer,children:[Object(u.jsxs)("div",{className:P.a.score,children:["score: ",Object(u.jsx)("span",{className:P.a.scoreData,children:e.score})]}),Object(u.jsxs)("div",{className:P.a.time,children:["time: ",Object(u.jsx)("span",{className:P.a.timeData,children:e.time})]})]})},C=o(10),T=o.n(C),D=o(2),E="TOGGLE_BGMUSIC",I="TOGGLE_SOUND",N={backgroundMusic:!1,eatingSound:!1},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(D.a)(Object(D.a)({},e),{},{backgroundMusic:!e.backgroundMusic});case I:return Object(D.a)(Object(D.a)({},e),{},{eatingSound:!e.eatingSound});default:return e}},G=Object(i.b)((function(e){return{sound:e.sound}}),(function(e){return{toggleBgMusic:function(){e({type:E})},toggleSound:function(){e({type:I})}}}))((function(e){return Object(u.jsxs)("div",{className:T.a.buttonsContainer,children:[Object(u.jsx)("button",{onClick:function(){e.toggleBgMusic()},className:T.a.button,children:"music"}),Object(u.jsx)("button",{onClick:function(){e.toggleSound()},className:T.a.button,children:"sound"})]})})),F="SET_FIELD",L="SET_FOOD",H="SET_HEAD",M="SET_TAIL",A="ADD_SCORE",R="ADD_TIME",B="TOOGLE_IS_FOOD",K="TOOGLE_IS_HEAD",U="TOOGLE_IS_TAIL",V="SET_DIRECTION",X="CHANGE_HEAD_COORDINATES",Y="GAME_OVER",W={rows:20,cols:20,field:[],food:{},snake:{head:{},tail:[]},currentDirection:"right",tickTime:150,score:0,time:0,die:!1},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(D.a)(Object(D.a)({},e),{},{field:t.field});case L:return Object(D.a)(Object(D.a)({},e),{},{food:t.foodCoordinates});case H:return Object(D.a)(Object(D.a)({},e),{},{snake:Object(D.a)(Object(D.a)({},e.snake),{},{head:t.headCoordinates})});case M:return Object(D.a)(Object(D.a)({},e),{},{snake:Object(D.a)(Object(D.a)({},e.snake),{},{tail:t.tailCoordinates})});case B:return Object(D.a)(Object(D.a)({},e),{},{field:e.field.map((function(t){return t.row===e.food.row&&t.col===e.food.col?Object(D.a)(Object(D.a)({},t),{},{isFood:!0}):Object(D.a)(Object(D.a)({},t),{},{isFood:!1})}))});case K:return Object(D.a)(Object(D.a)({},e),{},{field:e.field.map((function(t){return t.row===e.snake.head.row&&t.col===e.snake.head.col?Object(D.a)(Object(D.a)({},t),{},{isHead:!0}):Object(D.a)(Object(D.a)({},t),{},{isHead:!1})}))});case U:return Object(D.a)(Object(D.a)({},e),{},{field:e.field.map((function(t){return e.snake.tail.find((function(e){return e.col===t.col&&e.row===t.row}))?Object(D.a)(Object(D.a)({},t),{},{isTail:!0}):Object(D.a)(Object(D.a)({},t),{},{isTail:!1})}))});case A:return Object(D.a)(Object(D.a)({},e),{},{score:e.score+1});case R:return Object(D.a)(Object(D.a)({},e),{},{time:e.time+1});case Y:return Object(D.a)(Object(D.a)({},e),{},{die:!0});case V:return Object(D.a)(Object(D.a)({},e),{},{currentDirection:t.direction});case X:var o=e.snake.head;switch(e.currentDirection){case"left":o.col--;break;case"up":o.row--;break;case"down":o.row++;break;case"right":default:o.col++}return Object(D.a)(Object(D.a)({},e),{},{snake:Object(D.a)(Object(D.a)({},e.snake),{},{head:o})});default:return e}},Q=function(e){Object(b.a)(o,e);var t=Object(m.a)(o);function o(e){var a;Object(p.a)(this,o),a=t.call(this,e);for(var s=[],n=0;n<a.props.gamePage.rows;n++)for(var r=0;r<a.props.gamePage.cols;r++)s.push({row:n,col:r,isFood:!1,isHead:!1,isTail:!1});return a.props.setField(s),a.handleKeyPress=a.handleKeyPress.bind(Object(j.a)(a)),a}return Object(h.a)(o,[{key:"handleKeyPress",value:function(e){37===e.keyCode&&"right"!==this.props.gamePage.currentDirection?this.props.setDirection("left"):38===e.keyCode&&"down"!==this.props.gamePage.currentDirection?this.props.setDirection("up"):39===e.keyCode&&"left"!==this.props.gamePage.currentDirection?this.props.setDirection("right"):40===e.keyCode&&"up"!==this.props.gamePage.currentDirection&&this.props.setDirection("down")}},{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("keydown",this.handleKeyPress);var t=this.getRandomCoordinates(),o=this.getCenterOfGrid();this.props.setFood(t),this.props.setHead(o),this.props.toogleIsFood(),window.fnInterval=setInterval((function(){e.gameTick()}),this.props.gamePage.tickTime),window.time=setInterval((function(){e.timeGame()}),1e3)}},{key:"gameTick",value:function(){this.props.changeHeadCoordinates(),this.props.toogleIsHead(),this.props.toogleIsTail();var e=this.props.gamePage.snake,t=this.props.gamePage.snake.tail;e.tail.find((function(t){return t.col===e.head.col&&t.row===e.head.row}))&&this.props.gameOver(),t.unshift({col:e.head.col,row:e.head.row}),e.head.col===this.props.gamePage.food.col&&e.head.row===this.props.gamePage.food.row?(this.props.setFood(this.getRandomCoordinates()),this.props.toogleIsFood(),this.props.addScore()):t.pop(),this.props.setTail(t),(e.head.row<0||e.head.row>=this.props.gamePage.rows||e.head.col<0||e.head.col>=this.props.gamePage.cols)&&this.props.gameOver(),this.props.gamePage.die&&(clearInterval(window.fnInterval),clearInterval(window.time))}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.handleKeyPress),clearInterval(window.fnInterval),clearInterval(window.time)}},{key:"getRandomCoordinates",value:function(){return{row:Math.floor(Math.random()*this.props.gamePage.rows),col:Math.floor(Math.random()*this.props.gamePage.cols)}}},{key:"getCenterOfGrid",value:function(){return{row:Math.floor((this.props.gamePage.rows-1)/2),col:Math.floor((this.props.gamePage.cols-1)/2)}}},{key:"timeGame",value:function(){this.props.addTime()}},{key:"render",value:function(){var e=this.props.gamePage.field.map((function(e){return Object(u.jsx)("div",{className:e.isHead?O.a.isHead:e.isTail?O.a.isTail:e.isFood?O.a.isFood:O.a.fieldItem},e.row+"-"+e.col)}));return Object(u.jsxs)("div",{className:O.a.gameContainer,children:[this.props.gamePage.die?Object(u.jsx)(u.Fragment,{}):Object(u.jsx)(y,{score:this.props.gamePage.score,time:this.props.gamePage.time}),this.props.gamePage.die?Object(u.jsx)(u.Fragment,{}):Object(u.jsx)(G,{}),Object(u.jsx)(f.a,{src:"../../assets/sounds/music.mp3",playing:this.props.sound.backgroundMusic}),Object(u.jsx)("div",{children:this.props.gamePage.die?Object(u.jsx)(x,{score:this.props.gamePage.score,time:this.props.gamePage.time}):Object(u.jsx)("div",{className:O.a.grid,children:e})})]})}}]),o}(s.a.Component),Z=Object(i.b)((function(e){return{gamePage:e.gamePage,sound:e.sound}}),(function(e){return{setField:function(t){e(function(e){return{type:F,field:e}}(t))},setFood:function(t){e(function(e){return{type:L,foodCoordinates:e}}(t))},setHead:function(t){e(function(e){return{type:H,headCoordinates:e}}(t))},setTail:function(t){e(function(e){return{type:M,tailCoordinates:e}}(t))},toogleIsFood:function(){e({type:B})},toogleIsHead:function(){e({type:K})},toogleIsTail:function(){e({type:U})},setDirection:function(t){e(function(e){return{type:V,direction:e}}(t))},changeHeadCoordinates:function(){e({type:X})},addScore:function(){e({type:A})},addTime:function(){e({type:R})},gameOver:function(){e({type:Y})}}}))(Q),q=function(e){return Object(u.jsx)(Z,{})},z=o(11),$=o.n(z),ee=function(e){return Object(u.jsxs)("div",{className:$.a.footer,children:[Object(u.jsx)("p",{children:"\xa9 2021"}),Object(u.jsx)("a",{href:"https://github.com/spytni1212",children:Object(u.jsx)("div",{className:$.a.github})}),Object(u.jsx)("a",{href:"https://rs.school/js/",children:Object(u.jsx)("div",{className:$.a.rsschool})})]})},te=o(6),oe=Object(te.b)({gamePage:J,sound:S}),ae=Object(te.d)(oe,Object(te.c)(window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsxs)(i.a,{store:ae,children:[Object(u.jsx)(l,{}),Object(u.jsx)(q,{}),Object(u.jsx)(ee,{})]})}),document.getElementById("root"))},7:function(e,t,o){e.exports={progressContainer:"Progress_progressContainer__30_mA",score:"Progress_score__ZsszO",time:"Progress_time__35-Ad",scoreData:"Progress_scoreData__2sKxS",timeData:"Progress_timeData__1nZ1q"}}},[[41,1,2]]]);
//# sourceMappingURL=main.b19c926b.chunk.js.map